# DAG Documentation

**Source Repository:** synthetic-generator-v2  
**File Path:** synthetic/synthetic_sensor_gated_03_ftp_drop_zone_monitor.py  
**Stars:** 0  
**License:** MIT  
**Detected Version:** 2.x  
**Topology Pattern:** sensor_gated  
**Complexity Score:** 3/10  

---

[ftp_vendor_inventory_processor] - Comprehensive Pipeline Description

Opening Summary:
This sensor-gated pipeline monitors an FTP server for vendor inventory files, downloads detected files, performs data cleansing, and merges the processed data with internal inventory systems. The topology follows a strict sensor-gated sequential pattern where a custom FTP sensor gates all downstream processing tasks. Key infrastructure features include a custom FTPFileSensor with configurable polling intervals and timeout, PythonOperator-based data processing tasks, and daily scheduled execution with retry policies.

Pipeline Steps:

1. wait_for_ftp_file
  • Objective: Monitor FTP server for vendor_inventory.csv file availability before proceeding with data processing pipeline.
  • Technical Details:
    - Input: FTP server connection (implied)
    - Output: File detection signal that unlocks downstream download task
    - Integrations: FTP server (custom sensor implementation)
    - Key Parameters: mode='poke', poke_interval=30, timeout=300
  • Operator or Mechanism: FTPFileSensor (custom sensor)
  • Notes: Polls FTP server every 30 seconds with 5-minute timeout; serves as pipeline gate

2. download_vendor_file
  • Objective: Download the detected vendor_inventory.csv file from FTP server to local filesystem for processing.
  • Technical Details:
    - Input: File detection signal from wait_for_ftp_file sensor
    - Output: Local file at /tmp/vendor_inventory.csv for downstream cleansing
    - Integrations: FTP server file transfer
  • Operator or Mechanism: PythonOperator
  • Notes: Executes only when sensor successfully detects file

3. cleanse_vendor_data
  • Objective: Cleanse vendor inventory data by removing null values from critical columns to ensure data quality.
  • Technical Details:
    - Input: Downloaded vendor_inventory.csv file from previous task
    - Output: Cleansed vendor data ready for merge operation
    - Key Parameters: Focus on product_id, quantity, price columns
  • Operator or Mechanism: PythonOperator

4. merge_with_internal_inventory
  • Objective: Merge processed vendor inventory data with internal inventory system to update stock levels and pricing.
  • Technical Details:
    - Input: Cleansed vendor data from previous task
    - Output: Updated internal inventory records
    - Integrations: Internal inventory system (implied)
    - Key Parameters: Join operation on product_id column
  • Operator or Mechanism: PythonOperator

Orchestration & Scheduling:
- Schedule: @daily (runs once per day)
- Start Date: January 1, 2024
- Catchup: False (no backfilling)
- Default Args: 2 retries with 5-minute delay between retries, no email notifications on failure/retry

Infrastructure & Dependencies:
- Sensors: Custom FTPFileSensor monitoring for vendor_inventory.csv file on FTP server
- Connections/IDs: Implied FTP server connection (custom sensor implementation)
- Data I/O hints: File path /tmp/vendor_inventory.csv for downloaded files
- Sensor Configuration: poke_interval=30 seconds, timeout=300 seconds (5 minutes)

Failure Handling & Alerts:
- Retry Policy: 2 retries with 5-minute delay between attempts
- Email Notifications: Disabled (email_on_failure=False, email_on_retry=False)

Pattern-Specific Notes:
- Sensor-Gated: Custom FTPFileSensor gates entire processing pipeline; downstream tasks execute only when file detection succeeds
- Sequential Flow: Strict linear dependency: sensor → download → cleanse → merge
- File Monitoring: Specifically targets vendor_inventory.csv file on FTP server with configurable polling behavior
