# Multilingual Product Review Analysis Pipeline Configuration

## Dataset Structure
```
review_id,product_id,review_text,language_code,submission_date 
F1001,P5436,"Diese Jacke ist fantastisch für den Winter!",de,20230110 
F1002,P5436,"This jacket was too small for me.",en,20230115 
F1003,P5436,"La qualità è ottima ma il prezzo è alto.",it,20230118
```

## Business Value
Enriches product reviews with language verification, sentiment, and key feature extraction using LLM capabilities for deeper customer insight.

## Pipeline Steps

### 1. Load & Modify Data
- **Objective**: Ingest review CSV, standardize date formats, convert to JSON
- **Input**: reviews.csv from DATA_DIR
- **Output**: table_data_2.json in DATA_DIR
- **Docker Image**: i2t-backendwithintertwino6-load-and-modify:latest
- **Key Parameters**:
  - DATASET_ID=2
  - DATE_COLUMN=submission_date
  - TABLE_NAME_PREFIX=JOT_

### 2. Language Detection
- **Objective**: Verify or correct the language_code using language detection algorithms
- **Input**: table_data_2.json
- **Output**: lang_detected_2.json
- **Docker Image**: jmockit/language-detection or equivalent
- **Key Parameters**:
  - TEXT_COLUMN=review_text
  - LANG_CODE_COLUMN=language_code
  - OUTPUT_FILE=lang_detected_2.json

### 3. Sentiment Analysis
- **Objective**: Determine sentiment of reviews using LLM
- **Input**: lang_detected_2.json
- **Output**: sentiment_analyzed_2.json
- **Docker Image**: huggingface/transformers-inference
- **Key Parameters**:
  - MODEL_NAME=distilbert-base-uncased-finetuned-sst-2-english
  - TEXT_COLUMN=review_text
  - OUTPUT_COLUMN=sentiment_score

### 4. Category Extraction
- **Objective**: Extract product features or categories from reviews
- **Input**: sentiment_analyzed_2.json
- **Output**: column_extended_2.json (renaming to match original pipeline pattern)
- **Docker Image**: i2t-backendwithintertwino6-column-extension:latest
  (Using the original pipeline's column extension image with LLM parameters)
- **Key Parameters**:
  - EXTENDER_ID=featureExtractor
  - TEXT_COLUMN=review_text
  - OUTPUT_COLUMN=mentioned_features

### 5. Save Final Data
- **Objective**: Export the fully enriched review data to CSV
- **Input**: column_extended_2.json
- **Output**: enriched_data_2.csv in DATA_DIR
- **Docker Image**: i2t-backendwithintertwino6-save:latest
- **Key Parameters**:
  - DATASET_ID=2

## Infrastructure & Error Handling
- Shared volume mounting (DATA_DIR via environment variable)
- Custom Docker network (app_network) covering dependencies
- Error handling through Airflow task retries (default: 1)
- Auto-cleanup of containers
