metadata:
  target_orchestrator: prefect
  generated_at: 2025-12-01 04:06:23.660988
  source_analysis_file: Pipeline_Description_Dataset/M4TTRX__data-eng-project__global_dag.py_description.txt
  pipeline_name: global_dag
  pipeline_description: ETL pipeline that processes French government death records and power plant data using a staged 
    ETL pattern with fan‑out/fan‑in parallelism, conditional branching, and PostgreSQL loading.
  orchestrator_specific:
    flow_name: global_dag
    deployment_name: global_dag_deployment
    work_pool: default-agent-pool
    task_runner: ConcurrentTaskRunner
    prefect_version: 2.14.0
schedule:
  enabled: false
  schedule_expression:
  start_date:
  end_date:
  timezone: UTC
  catchup: false
connections:
  - conn_id: city_geo_api
    conn_type: Secret
    description: City Geographic Data API (static.data.gouv.fr)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: city_geo_api
      config:
        base_path:
        base_url: https://static.data.gouv.fr/geo/cities.csv
        host:
        port:
        protocol: https
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: nuclear_plants_api
    conn_type: Secret
    description: Nuclear Power Plant Dataset API (data.gouv.fr)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: nuclear_plants_api
      config:
        base_path:
        base_url: https://www.data.gouv.fr/api/3/datasets/nuclear-plants
        host:
        port:
        protocol: https
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: thermal_plants_api
    conn_type: Secret
    description: Thermal Power Plant Dataset API (data.gouv.fr)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: thermal_plants_api
      config:
        base_path:
        base_url: https://www.data.gouv.fr/api/3/datasets/thermal-plants
        host:
        port:
        protocol: https
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: death_records_api
    conn_type: Secret
    description: Death Records Dataset API (data.gouv.fr)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: death_records_api
      config:
        base_path:
        base_url: https://www.data.gouv.fr/api/3/datasets/death-records
        host:
        port:
        protocol: https
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: redis_cache
    conn_type: Secret
    description: Redis Cache (host=redis, port=6379)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: redis_cache
      config:
        base_path:
        base_url:
        host: redis
        port: 6379
        protocol: redis
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: postgres_db
    conn_type: Secret
    description: PostgreSQL Database (postgres_default)
    config:
      block_type: Secret
      block_module: prefect.blocks.system
      block_name: postgres_db
      config:
        base_path:
        base_url:
        host:
        port:
        protocol: postgresql
        database: postgres
        schema:
        bucket:
        queue_name:
        username_secret_name: POSTGRES_USER
        password_secret_name: POSTGRES_PASSWORD
  - conn_id: filesystem_ingestion
    conn_type: LocalFileSystem
    description: Local Ingestion Filesystem
    config:
      block_type: LocalFileSystem
      block_module: prefect.filesystems
      block_name: filesystem_ingestion
      config:
        base_path: /opt/airflow/dags/data/ingestion/
        base_url:
        host:
        port:
        protocol: file
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: filesystem_staging
    conn_type: LocalFileSystem
    description: Local Staging Filesystem
    config:
      block_type: LocalFileSystem
      block_module: prefect.filesystems
      block_name: filesystem_staging
      config:
        base_path: /opt/airflow/dags/data/staging/
        base_url:
        host:
        port:
        protocol: file
        database:
        schema:
        bucket:
        queue_name:
  - conn_id: filesystem_sql_tmp
    conn_type: LocalFileSystem
    description: Local SQL Temporary Filesystem
    config:
      block_type: LocalFileSystem
      block_module: prefect.filesystems
      block_name: filesystem_sql_tmp
      config:
        base_path: /opt/airflow/dags/sql/tmp/
        base_url:
        host:
        port:
        protocol: file
        database:
        schema:
        bucket:
        queue_name:
tasks: []
