# Generated by Dagster Code Generator
# Generation Metadata:
# - Date: 2023-10-05
# - Dagster Version: 1.5.0
# - Pattern: fanout_fanin

from dagster import job, op, Out, In, RetryPolicy, k8s_job_executor, in_process_executor, fs_io_manager, resource

# Define required resources
@resource
def data_storage():
    """Resource for data storage operations."""
    pass

@resource
def http_api():
    """Resource for HTTP API interactions."""
    pass

@resource
def email_system():
    """Resource for sending email notifications."""
    pass

@resource
def kubernetes():
    """Resource for Kubernetes operations."""
    pass

# Define the ops
@op(
    name="check_pcd_sftp_folder",
    description="Check PCD SFTP Folder",
    executor_def=k8s_job_executor,
    retry_policy=RetryPolicy(max_retries=0),
)
def check_pcd_sftp_folder(context):
    """Check the PCD SFTP folder for new files."""
    context.log.info("Checking PCD SFTP folder...")
    # Add your logic here
    return "SFTP folder checked"

@op(
    name="check_pcd_shared_folder",
    description="Check PCD Shared Folder",
    executor_def=k8s_job_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"sftp_result": In(str)},
)
def check_pcd_shared_folder(context, sftp_result):
    """Check the PCD shared folder for new files."""
    context.log.info("Checking PCD shared folder...")
    # Add your logic here
    return "Shared folder checked"

@op(
    name="start_pcd_extract_1",
    description="Start PCD Extract 1",
    executor_def=in_process_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"shared_folder_result": In(str)},
)
def start_pcd_extract_1(context, shared_folder_result):
    """Start the first PCD extract process."""
    context.log.info("Starting PCD extract 1...")
    # Add your logic here
    return "Extract 1 started"

@op(
    name="parallel_http_api_extraction",
    description="Parallel HTTP API Extraction",
    executor_def=in_process_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"extract_1_result": In(str)},
)
def parallel_http_api_extraction(context, extract_1_result):
    """Perform parallel HTTP API extraction."""
    context.log.info("Performing parallel HTTP API extraction...")
    # Add your logic here
    return "API extraction completed"

@op(
    name="start_pcd_extract_2",
    description="Start PCD Extract 2",
    executor_def=in_process_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"api_extraction_result": In(str)},
)
def start_pcd_extract_2(context, api_extraction_result):
    """Start the second PCD extract process."""
    context.log.info("Starting PCD extract 2...")
    # Add your logic here
    return "Extract 2 started"

@op(
    name="pcd_file_upload",
    description="PCD File Upload",
    executor_def=k8s_job_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"extract_2_result": In(str)},
)
def pcd_file_upload(context, extract_2_result):
    """Upload PCD files to the target system."""
    context.log.info("Uploading PCD files...")
    # Add your logic here
    return "Files uploaded"

@op(
    name="etl_notification",
    description="ETL Notification",
    executor_def=in_process_executor,
    retry_policy=RetryPolicy(max_retries=0),
    ins={"upload_result": In(str)},
)
def etl_notification(context, upload_result):
    """Send a notification for the ETL process completion."""
    context.log.info("Sending ETL notification...")
    # Add your logic here
    return "Notification sent"

# Define the job
@job(
    name="check_pcd_sftp_folder_pipeline",
    description="No description provided.",
    executor_def=k8s_job_executor,
    resource_defs={
        "data_storage": data_storage,
        "http_api": http_api,
        "email_system": email_system,
        "kubernetes": kubernetes,
    },
    io_manager_def=fs_io_manager,
)
def check_pcd_sftp_folder_pipeline():
    sftp_result = check_pcd_sftp_folder()
    shared_folder_result = check_pcd_shared_folder(sftp_result)
    extract_1_result = start_pcd_extract_1(shared_folder_result)
    api_extraction_result = parallel_http_api_extraction(extract_1_result)
    extract_2_result = start_pcd_extract_2(api_extraction_result)
    upload_result = pcd_file_upload(extract_2_result)
    etl_notification(upload_result)